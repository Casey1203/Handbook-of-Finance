# Chapter 21. Yield Curve Risk Management
摘要：收益率曲线的风险管理，在于控制固定收益或衍生品组合，关于一个或多个利率变动的敏感程度。通常，这种控制的目的有防御型、积极型、战略型和战术型。但是基本上，所有这些控制组合的敏感度，都是基于相对另外一个“目标”的固定收益组合的。作为一个客观的利率曲线风险管理程序，首要挑战是定量出固定收益和目标组合关于利率的敏感度。次要挑战是开发符合实际的利率曲线模型。最后，针对长期的期限模型，开发出防御型风险管理策略，针对短期期限模型，开发出积极型战术。
关键词：利率曲线风险管理、防御型风险管理、单因子模型、麦考雷久期、偏久期、杠杆久期、关键久期、多因子利率曲线模型、主成分、免疫、随机免疫、利差久期、杠杆利差、多元久期。
在资产/负债管理，或者说抵押担保债券(collateralize mortgage obligation, CMO)、担保债务凭证(CDO,
Collateralized Debt
Obligation)、固定收益对冲基金和市场中性组合管理。相对于负债端、或组合中持有的固定收益或衍生品的空头仓位，他们在资产端控制了敏感度。而在固定收益管理的总收益上，通常他们控制了相对于固定收益基准或指数的敏感程度。防御型利率曲线风险管理，控制利率敏感度的主要目的是为了防止相比于对标组合的损失。而积极型或机会型管理是为了能够将观察到的机会变成收益，从而进行资产化。防御型风险管理可以是战略型，进而反映出利率的长期的期限模型，也可以是战术型，进而反映出短期的利率变动。然而，进攻型风险管理普遍是战术型（Ｇrieves
and Marcos,
1992）。资产/负债管理和市场中性组合管理趋向于做战略型和防御型，也可能有向战术型的偏向，而面向总收益的管理则是强烈地趋向于战术型，可能会有防御型的偏向。例外也是有发生的。
独立客观的利率曲线风险管理程序，第一个问题是定量给定的固定收益组合的利率敏感度。第二个问题是和开发战略型或战术型利率曲线模型有关。最后一个问题是或者是从长期期限模型中开发一个防御型风险管理战略，或是从短期期限模型中开发一个机会型战术。
本章的目的是提供一个详细的报告，包括了各种定量利率敏感度的方法，突出了理论上的优美和实践中的缺点。并且讨论了这些方法对防御型和机会型组合管理的启示。至于利率曲线变动的模型，本章会列出一些有用的策略。战术型模型不会被写在报告中，因为实践者通常不会将这些方法的使用，或者是这些方法的作用写在文章上。

## SINGLE-FACTOR YIELD CURVE MODELS

### 数学框架
单因子模型是将利率在未来的变动的不确定性用一个因子来表示，可以理解为是一个统计变量，即随机变量。有很多这样的模型，他们为了突出单因子，有很多合理的方法。我们对一个因子是否足以刻画表示存疑。假设可以，这个因子的可能性就很多了。而且，任何这样的独立假设，似乎都对应着有个最好的因子，实际中很有效，或者无效。
给定这个因子，我们定义为$i$，即使在一些模型中，这个变量通常不代表利率。我们可以对证券或者组合的价格写成关于这个变量的函数$P(i)$，并且观察这个变量变化后，价格的变化的敏感度。幸运的是，牛顿和莱布尼兹发明了微积分，因此我们可以写出完备的结论，即
$$
P(j)=P(i)+P'(i)(j-1)+0.5P''(i)(j-i)^2+\ldots \tag{21.1}
$$
其中，$P'(i)$和$P''(i)$是$P(i)$的一阶和二阶导数。
这个式子是数学家很喜欢的泰勒展开式，表明，当知道了函数和它的导数在$i$点的值时，则有可能精确的算出函数在$j$点的值。这里的$i$值表示今天的因子值，而$j$值表示因子值飘逸了。尽管这个式子对所有的函数不是完备的，但是可以运用在实际对固定收益进行定价的公式。除了可以精准计算$P(j)$值，还可以计算$P(j)$的近似值，方式是计算式子中的前两三项。具体多少项是取决于证券和这个因子值漂移的大小$j-i$。通常，这个近似效果会随着$j-i$的增大而变差。同时，给定一个$j-i$的值，如果证券中含有期权，则近似效果也会变差。
金融的运用中，上式通常会除以$P(i)$。这样，导数项的单位就是相对量，因此，给定的证券就和具体持有多少金额无关。关于这个相对的导数已经有术语了。因此会把上式重新写成这个样子，并且省略了高阶项。
$$
\begin{equation}
P(j)\approx P(i)[1-D(i)(j-1)+0.5C(i)(j-i)^2] \tag{21.2}
\end{equation}
$$
$D(i)$或$D$是久期，加了一个负号，因为久期定义为负导数，这和Macaulay duration保持一致，它没用微积分。

久期和凸度可以表示成
$$
D(i)=-\frac{P'(i)}{P(i)}, C(i)=\frac{P''(i)}{P(i)} \tag{21.3}
$$
通常在金融数学中，导数没有解析解，因此要用近似解，即
$$
P'(i) \approx \frac{P(i+\Delta i)- P(i-\Delta i)}{2\Delta i}
$$

$$
P''(i)
\approx \frac{P(i+\Delta i)-2P(i) + P(i-\Delta i)}{(\Delta i)^2}
$$
这是中心差分格式。另外一种方法，是前向差分，即$P(i)$代替$P(i-\Delta i)$作为分子，并且分母用$\Delta
i$代替，由于价格函数的凸性，这会产生一点偏差。对于任何近似应用，没有说$\Delta
i$要多小，才是一个好的近似。这要使用试错法。目标是为了确定一个稳定的近似值。
久期和凸度的公式体现出其组合的意义，即组合的久期和凸度，可以通过各证券的仓位加权求和得到。
$$
D^P=\frac{\sum P_j
D^{P_j}}{\sum_ {P_j}},C^P=\frac{\sum P_j C^{P_j}}{\sum P_j}
$$
这个性质有许多运用。例如，可以计算资产和负债的盈余；利用含权证券和不含权的对手方，计算嵌入式期权的属性。预测交易对组合的影响。

### 到期收益率方法
最简单和自然的单因子模型是基于证券的YTM。YTM的值等于一个独特的利率值$i$，以至于现金流的现值等于价格$P(i)$。即$P(i)=\sum c_t
v^{mt}$，其中$c_t$等于时刻$t$的现金流，$t$通常按年增长。对于年化的YTM，$v=(1+i)^{-1}$，对于半年的YTM，$v=(1+0.5i)^{-1}$。一般形式为$v=(1+i/m)^{-1}$。久期和凸度的公式可以写成
$$
D=\frac{\sum t c_t v^{mt+1}}{P},C=\frac{t(t+1/m)c_t v^{mt+2}}{P}
$$
麦考雷久期$D^M=D/v$。实际上它并不是通过微积分推导出的，也不是为了要衡量价格的敏感度推导出的。它直觉上解释了现金流根据到期时间的加权平均值，$D^M=\sum
tw^t$，其中$w_t=c_t
v^{mt}/P$。结果，对于零息债券，$D^M$等于期限。因为权重的和为1，因此把权重解释成概率，$D^M$等于$t$的期望$E[t]$。进一步扩展，我们定义麦考雷凸度，$C^M=C/v^2$，它衡量$E[t^2]+E[t]/m$，衡量了时间的方差，因此凸显了现金流的分散程度。
不幸的是，除了麦考雷久期需要放缩一下，才能得到久期和凸度的近似价格公式之外，麦考雷久期还不适用于含权债券。我们利用久期和凸度的基本公式，然后转换到对应的麦考雷版本，会发现它们无法解释时间和现金流的现象。例如，interest-
only strips(IOs)的久期为负，principal-only
strips(POs)的久期超过了它的到期时间。尽管如此，麦考雷提倡将上面的久期和凸度定义为“修正”久期和“修正”凸度。
除了麦考雷的缺点外，YTM单因子模型有个致命缺点，即固定现金流的证券的YTM无法满足任何单因子的关系，除了在最严格的利率期限结构的形状和变动的模型下。
例如，YTM的假设期限结构移动的步伐相等，表明利率曲线平的，并且仅仅是平行移动。然而，这个结果YTM可能满足更加复杂的单因子关系，即这是一个函数$Y(i,y)$，其中$Y(0,y)=y$，即今天的YTM。因此当因子$i$改变时，每个$y$值也随着改变。上述的经典结果是，假设$Y(i,y)=y+i$。结果是，即便单因子模型，也需要利率曲线是平的，并且仅平移移动。

更一般的，上述的结论可以扩展到多因子模型，即$Y(\textbf{i},\textbf{y})$，其中$Y(\textbf{0},\textbf{y})=\textbf{y}$，$\textbf{i}$表示因子向量，表明YTM移动的模型$y\rightarrow Y(\textbf{i},\textbf{y})$，在利率曲线不是平的时候，无法得到保证。证明过程比较繁琐，超出了本章的范围。

结果是，即便YTM是一个很自然的因子框架，它对于组合分析和管理来说，也是一个毫无希望的死胡同。因为在进行组合分析时，需要从单个证券的敏感度上，计算出单个因子对组合整体的敏感度。这就需要模型能够指出单个YTM作为一个整体，会怎样移动。但是，这通常来说没有这样的模型可以保证。

### 其他单因子模型

YTM的问题是，它概括了太多的信息。有许多现金流的结构都有同样的YTM。因此，基于一个假的基准期限结构移动，他们开始有一样的YTM，在移动过后，YTM就不一样了。事实上，这个现象突出了上面提到的证明了。但是在这个现象中，YTM解决了单因子问题的另外一个可能的解，即，简单地模拟了利率期限结构的运动表示成一个单因子模型。资产的价格和价格敏感度与今天的利率曲线和单个因子来表示其变化有关。

当然，有很多种方法。首先，要选择初始期限结构。常见的是par bond curve和spot rate model，以半年为期限的间隔，尽管forward rate model有同样的作用。这些模型的出发点是“on-the-run”Treasury bond and Treasury strip(zero coupon bond) curve。通常，各个评级都会被加到“无风险”利率中，反应了市场对证券的定价含有系统性风险。

下一步是定义基准期限结构的运动模式，用单个因子的形式。下面的模型的演变

| 运动模式                   | 公式                                             |
| -------------------------- | ------------------------------------------------ |
| Parallel (Additive) Shift: | $i_t \rightarrow i_t+i$                          |
| Multiplicative Shift:      | $i_t\rightarrow i_t(1+i)$                        |
| Lognormal Shift:           | $i_t \rightarrow i_t e^i$                        |
| Log-Additive Shift:        | $i_t \rightarrow i_t+i \ln(1+\alpha t)/\alpha t$ |
| Directional Shift:         | $i_t \rightarrow i_t + n_t i$                    |

上面的例子中，$i_t$定义为初始期限结构在到期日为$t$的值，即还没shift。$i$是单个因子，$\alpha$是参数，$n_t$是和到期日关联的移动参数。第一个模型的shift是可加的。第二个是可乘的。第三个是对数可加的。第四个是对数可乘的。第五个是可以改变方向的shift。

为了定义久期，可变方向的模型是最通用的。定义$Y(i,i_t)$，其中$Y(0,i_t)=i_t$。可以很容易的利用$(21.3)$，来检查当$n_t=\partial_i Y(0,i_t)$，这个方法得到的久期是一样，其中$\partial_i$是关于$i$的偏导数。

任何一个单因子模型都成立
$$
P(j)=P(i)\exp\left[-\int_i^j D(s)ds\right] \tag{21.6}
$$
和$(21.2)$式子相反，这个等式表明了因子值$j$定义的价格，可以完全被因子值$i$定义的价格所决定。久期是在$i$和$j$之间所有的因子值。表面上看，它指出了价格函数和所有高阶导数不相关，并且要控制价格，只需要控制久期。虽然这个现象是有效的，但是它并没有带来实践中利率曲线管理所预期的意义，即不能精确的像$(21.6)$那样，在没有凸度的情况下，精确地管理久期。

在之后的time dynamics中还会讨论到。为了确定久期的可管理性，我们需要理解因子变化对久期的敏感度。将式$(21.1)$运用到$D(i)$中，得到
$$
D(j)\approx D(i)+[D^2(i)-C(i)](j-i) \tag{21.7}
$$
结果，即便是最小的factor shift$j-i$，久期的变化会反应凸度相对于久期平方的尺度。

当凸度比较大时，久期会随着因子的增加而降低。例如，非可赎回债券、保险、long了一个回售期权的年金合约有这样的性质。当凸度相对较小，或是负的时，久期会随着因子的增加而增加。例如，可赎回债券、MBS、CMO有这样的性质。最后，当凸度等于久期平方时，久期对因子的变化不敏感，例如零息债券。

式子$(21.6)$提供了一个关于价格敏感度的新的近似基础，在许多场合，在给定的$j-i$下，要比从式子$(21.2)$推出的近似更好。例如，一阶近似
$$
P(j)\approx P(i) \exp[-D(i)(j-i)] \tag{21.8}
$$
通常要比式子$(21.2)$推导出的一阶近似要更优。另外，这两个近似，通常被一起使用，来代表$P(j)$的上下界。

除了式子$(21.6)$和$(21.8)$背后的数学意义外，一个简单和直白的解释是，把factor shift的区间$[i,j]$，等分成$[t_j,t_j+1]$。计算价格的相对变化$P(t_j+1)/P(t_j)$，通过$1-D(t_j)$，$\Delta t$反映了式子$(21.2)$。当然，总体的相对变化$P(j)/P(i)$是这些子区间的乘积。如果所有的中间状态的久期都是准确的，式$(21.6)$可以离散的计算出来。设置所有的都是$D(i)$则可以计算出式$(21.8)$。基于式$(21.7)$来近似中间状态的久期，可以计算出二阶指数近似。

